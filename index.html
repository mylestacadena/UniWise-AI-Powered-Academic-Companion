<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UniWise Chat</title>

  <!-- Bootstrap Icons -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    rel="stylesheet"
  />

  <!-- Custom Styles -->
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body>
  <!-- Toggle Button (always pinned left) -->
  <div class="toggle-btn">
    <i class="bi bi-list"></i>
  </div>

  <!-- Sidebar -->
  <div class="sidebar collapsed d-flex flex-column">
    <!-- Logo -->
    <div class="logo text-center my-3">
      <img src="assets/images/uniwiselogo.jpg" alt="Logo" class="img-fluid" />
      <h1 class="title mt-2 label">UniWise</h1>
    </div>

    <!-- Navigation -->
    <nav class="flex-grow-1">
      <ul class="nav flex-column">
        <li class="nav-item mb-2"><i class="bi bi-gear"></i><span class="label">Settings</span></li>
        <li class="nav-item mb-2"><i class="bi bi-clock-history"></i><span class="label">History</span></li>
        <li class="nav-item mb-2"><i class="bi bi-book"></i><span class="label">Resources</span></li>
      </ul>
    </nav>

    <!-- New Chat Button -->
    <button class="new-chat">
      <i class="bi bi-plus-circle"></i><span class="label">New Chat</span>
    </button>
  </div>

  <!-- Chat Container -->
  <div class="chat-container d-flex justify-content-center align-items-center">
    <div class="chat-box">
      <div class="chat-area"></div>

      <!-- Suggested Questions -->
      <div class="suggestions">
        <div class="suggestion-header">
          <span>Suggested Questions</span>
          <i class="bi bi-x close-suggestions"></i>
        </div>
        <div class="suggestion-buttons">
          <button>What academic strands do you offer?</button>
          <button>How can I apply?</button>
          <button>What are the tuition fees?</button>
          <button>Where is the campus located?</button>
          <button>Is there an entrance exam?</button>
        </div>
      </div>

      <!-- Input Area -->
      <div class="input-area d-flex">
        <input type="text" placeholder="Type a message..." id="user-input" />
        <button class="send-btn" id="send-btn"><i class="bi bi-send-fill"></i></button>
      </div>
    </div>
  </div>

  <!-- Custom JS -->
  <script src="assets/js/script.js"></script>

  <script>
  // Function to speak text using browser TTS
  function speakBotMessage(text) {
    const synth = window.speechSynthesis;
    const utter = new SpeechSynthesisUtterance(text);
    utter.lang = "en-US";
    synth.speak(utter);
  }

  // Send message to Rasa via REST API
  async function sendMessageToRasa(message) {
    const response = await fetch("http://localhost:5005/webhooks/rest/webhook", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ sender: "user", message: message })
    });
    const data = await response.json();
    
    // Handle bot responses
    data.forEach(reply => {
      if (reply.text) {
        // Show bot message in your chat area
        const chatArea = document.querySelector(".chat-area");
        const botMsg = document.createElement("div");
        botMsg.classList.add("bot-message");
        botMsg.textContent = reply.text;
        chatArea.appendChild(botMsg);
        chatArea.scrollTop = chatArea.scrollHeight;

        // Speak the bot message
        speakBotMessage(reply.text);
      }
    });
  }

  // Listen to Send button
  document.getElementById("send-btn").addEventListener("click", () => {
    const input = document.getElementById("user-input");
    const message = input.value.trim();
    if (message) {
      // Show user message in chat area
      const chatArea = document.querySelector(".chat-area");
      const userMsg = document.createElement("div");
      userMsg.classList.add("user-message");
      userMsg.textContent = message;
      chatArea.appendChild(userMsg);
      chatArea.scrollTop = chatArea.scrollHeight;

      // Send message to Rasa
      sendMessageToRasa(message);
      input.value = "";
    }
  });

  // Optional: allow Enter key to send
  document.getElementById("user-input").addEventListener("keydown", (e) => {
    if (e.key === "Enter") document.getElementById("send-btn").click();
  });
</script>

  
</body>
</html>



